<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>用户API-WebSocket接口</title>
    <link rel="stylesheet" type="text/css" href="<%= STATIC %>/styles/cssdna.css?<%= VERSION %>">

    <style type="text/css">


        h1, h2, h3, h4, h5, h6 {
            margin: 20px 0 10px;
            padding: 0;
            font-weight: bold;
            -webkit-font-smoothing: antialiased;
            cursor: text;
            position: relative; }

        h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
            background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
            text-decoration: none; }

        h1 tt, h1 code {
            font-size: inherit; }

        h2 tt, h2 code {
            font-size: inherit; }

        h3 tt, h3 code {
            font-size: inherit; }

        h4 tt, h4 code {
            font-size: inherit; }

        h5 tt, h5 code {
            font-size: inherit; }

        h6 tt, h6 code {
            font-size: inherit; }

        h1 {
            font-size: 28px;
            color: black; }

        h2 {
            font-size: 24px;
            border-bottom: 1px solid #cccccc;
            color: black; }

        h3 {
            font-size: 18px; }

        h4 {
            font-size: 16px; }

        h5 {
            font-size: 14px; }

        h6 {
            color: #777777;
            font-size: 14px; }

        p, blockquote, ul, ol, dl, li, table, pre {
            margin: 15px 0; }

        hr {
            background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
            border: 0 none;
            color: #cccccc;
            height: 4px;
            padding: 0;
        }

        body > h2:first-child {
            margin-top: 0;
            padding-top: 0; }
        body > h1:first-child {
            margin-top: 0;
            padding-top: 0; }
        body > h1:first-child + h2 {
            margin-top: 0;
            padding-top: 0; }
        body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
            margin-top: 0;
            padding-top: 0; }

        a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
            margin-top: 0;
            padding-top: 0; }

        h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
            margin-top: 0; }

        li p.first {
            display: inline-block; }
        li {
            margin: 0; }


        ul :first-child, ol :first-child {
            margin-top: 0; }

        dl {
            padding: 0; }
        dl dt {
            font-size: 14px;
            font-weight: bold;
            font-style: italic;
            padding: 0;
            margin: 15px 0 5px; }
        dl dt:first-child {
            padding: 0; }
        dl dt > :first-child {
            margin-top: 0; }
        dl dt > :last-child {
            margin-bottom: 0; }
        dl dd {
            margin: 0 0 15px;
            padding: 0 15px; }
        dl dd > :first-child {
            margin-top: 0; }
        dl dd > :last-child {
            margin-bottom: 0; }

        blockquote {
            border-left: 4px solid #dddddd;
            padding: 0 15px;
            color: #777777; }
        blockquote > :first-child {
            margin-top: 0; }
        blockquote > :last-child {
            margin-bottom: 0; }

        table {
            padding: 0;border-collapse: collapse; }
        table tr {
            border-top: 1px solid #cccccc;
            background-color: white;
            margin: 0;
            padding: 0; }
        table tr:nth-child(2n) {
            background-color: #f8f8f8; }
        table tr th {
            font-weight: bold;
            border: 1px solid #cccccc;
            margin: 0;
            padding: 6px 13px; }
        table tr td {
            border: 1px solid #cccccc;
            margin: 0;
            padding: 6px 13px; }
        table tr th :first-child, table tr td :first-child {
            margin-top: 0; }
        table tr th :last-child, table tr td :last-child {
            margin-bottom: 0; }

        img {
            max-width: 100%; }

        span.frame {
            display: block;
            overflow: hidden; }
        span.frame > span {
            border: 1px solid #dddddd;
            display: block;
            float: left;
            overflow: hidden;
            margin: 13px 0 0;
            padding: 7px;
            width: auto; }
        span.frame span img {
            display: block;
            float: left; }
        span.frame span span {
            clear: both;
            color: #333333;
            display: block;
            padding: 5px 0 0; }
        span.align-center {
            display: block;
            overflow: hidden;
            clear: both; }
        span.align-center > span {
            display: block;
            overflow: hidden;
            margin: 13px auto 0;
            text-align: center; }
        span.align-center span img {
            margin: 0 auto;
            text-align: center; }
        span.align-right {
            display: block;
            overflow: hidden;
            clear: both; }
        span.align-right > span {
            display: block;
            overflow: hidden;
            margin: 13px 0 0;
            text-align: right; }
        span.align-right span img {
            margin: 0;
            text-align: right; }
        span.float-left {
            display: block;
            margin-right: 13px;
            overflow: hidden;
            float: left; }
        span.float-left span {
            margin: 13px 0 0; }
        span.float-right {
            display: block;
            margin-left: 13px;
            overflow: hidden;
            float: right; }
        span.float-right > span {
            display: block;
            overflow: hidden;
            margin: 13px auto 0;
            text-align: right; }

        code, tt {
            margin: 0 2px;
            padding: 0 5px;
            white-space: nowrap;
            border: 1px solid #eaeaea;
            background-color: #f8f8f8;
            border-radius: 3px; }

        pre code {
            margin: 0;
            padding: 0;
            white-space: pre;
            border: none;
            background: transparent; }

        .highlight pre {
            background-color: #f8f8f8;
            border: 1px solid #cccccc;
            font-size: 13px;
            line-height: 19px;
            overflow: auto;
            padding: 6px 10px;
            border-radius: 3px; }

        pre {
            background-color: #f8f8f8;
            border: 1px solid #cccccc;
            font-size: 13px;
            line-height: 19px;
            overflow: auto;
            padding: 6px 10px;
            border-radius: 3px; }
        pre code, pre tt {
            background-color: transparent;
            border: none; }

        sup {
            font-size: 0.83em;
            vertical-align: super;
            line-height: 0;
        }

        kbd {
            display: inline-block;
            padding: 3px 5px;
            font-size: 11px;
            line-height: 10px;
            color: #555;
            vertical-align: middle;
            background-color: #fcfcfc;
            border: solid 1px #ccc;
            border-bottom-color: #bbb;
            border-radius: 3px;
            box-shadow: inset 0 -1px 0 #bbb
        }

        * {
            -webkit-print-color-adjust: exact;
        }

        @media print {
            table, pre {
                page-break-inside: avoid;
            }
            pre {
                word-wrap: break-word;
            }
        }
    </style>


</head>


<body>
<div style="padding: 50px 0">
    <div class="cd-nav"><ul><li class="active"><a href="/help/restApi"><%= LANG('行情API (WebSocket)') %></a></li><li><a href="/help/httpApi"><%= LANG('交易API') %>(http)</a></li></ul></div>
<div style="width: 1110px;margin: 0 auto;background: #fff; line-height: 1.8; color: #555;padding: 30px;border-radius: 5px">
<h2 id="toc_0">WebSocketAPI</h2>

    <p><%= LANG('zbg为用户提供了一个简单的而又强大的API，旨在帮助用户快速高效的将zbg交易功能整合到自己应用当中。如果在使用过程中有任何问题，请联系我们技术讨论QQ群：') %><a style="font-size: 18px;text-decoration-line: underline;font-weight: bold" href="javascript:;">829230107</a><%= LANG('，我们将会为您做出最权威的解答') %></p>
    <p>Java Demo:https://github.com/zbg-user-api-demo/user_api_demo_java.git</p>
    <p>Python Demo:https://github.com/zbg-user-api-demo/user_api_demo_py.git</p>

<h2 id="toc_1"><%= LANG('WebSocket服务地址') %></h2>

<p><%= LANG('ZBG WebSocket服务连接地址：wss://kline.zbg.com/websocket') %></p>

<h2 id="toc_2"><%= LANG('使用说明') %></h2>

<p><%= LANG('以下API都可以在一个WebSocket 连接进行处理, 通过订阅报文中的action参数来订阅服务器数据。k线、盘口、交易记录数据三类数据服务器首先会返回一次全量数据，之后有新数据时会主动推送。') %><br>
    <%= LANG('订阅报文基础格式:') %> </p>

<div><pre><code class="language-none">{&quot;dataType&quot;:&quot;1_ENTRUST_ADD_EOS_QTUM&quot;, &quot;dataSize&quot;:1, &quot;action&quot;:&quot;ADD&quot;}
<%= LANG('dataType: 请求的数据类型, 下面各个章节会详细说明。') %>
<%= LANG('dataSize: 请求的数据数量，决定首次全量数据的数量，不传或者为 0 则返回一条数据。') %>
<%= LANG('action: 请求的动作类型，ADD:增加数据订阅，DEL:移除数据订阅。') %> </code></pre></div>

<p><%= LANG('报文格式比较简单直观，可以先用在线websocket工具简单测试下或者到官网有k线的页面打开开发者模式查看数据后再进行开发。') %>  </p>

<h2 id="toc_3">1<%= LANG('行情API') %></h2>

<p><%= LANG('获取zbg最新行情数据') %></p>

<h3 id="toc_4">1.1<%= LANG('K线') %></h3>

<p><%= LANG('size最多为500条，支持的时间周期有 1M, 5M, 15M, 30M, 1H, 1D') %><br>
    <%= LANG('示例') %></p>

<h5 id="toc_5">request</h5>

<div><pre><code class="language-none">{&quot;dataType&quot;:&quot;90_KLINE_1M_BTC_KRW&quot;,&quot;dataSize&quot;:1000,&quot;action&quot;:&quot;ADD&quot;} </code></pre></div>

<h5 id="toc_6"><%= LANG('首次全量数据response') %></h5>

<div><pre><code class="language-none">[[&quot;K&quot;,&quot;90&quot;,&quot;btc_krw&quot;,&quot;1530588720&quot;,&quot;9.182984&quot;,&quot;9.274772&quot;,&quot;9.139348&quot;,&quot;9.219058&quot;,&quot;66.68&quot;,&quot;0.39&quot;,&quot;1.00&quot;,&quot;1M&quot;,&quot;false&quot;],
[&quot;K&quot;,&quot;90&quot;,&quot;btc_krw&quot;,&quot;1530588660&quot;,&quot;9.323081&quot;,&quot;9.464753&quot;,&quot;9.233462&quot;,&quot;9.245472&quot;,&quot;137.81&quot;,&quot;-0.83&quot;,&quot;1.00&quot;,&quot;1M&quot;,&quot;false&quot;]]</code></pre></div>

<h5 id="toc_7"><%= LANG('增量数据response') %></h5>

<div><pre><code class="language-none">[&quot;K&quot;,&quot;90&quot;,&quot;btc_krw&quot;,&quot;1530588660&quot;,&quot;9.323081&quot;,&quot;9.464753&quot;,&quot;9.233462&quot;,&quot;9.245472&quot;,&quot;137.81&quot;,&quot;-0.83&quot;,&quot;1.00&quot;,&quot;1M&quot;,&quot;false&quot;]</code></pre></div>

<p><%= LANG('request dataType格式为') %> <code><%= LANG('市场id_KLINE_时间周期_市场卖方货币_市场卖方货币') %></code>
    <%= LANG('全量数据是增量数据的列表形式，字段说明：[数据类型, 市场ID, 币种信息, 时间戳, 开盘数据, 最高价, 最低价, 收盘价, 成交量, 涨跌幅度, 美元汇率, K线周期, 是否经过转换]') %>  </p>

<h3 id="toc_8">1.2<%= LANG('盘口（市场深度）') %></h3>

<p><%= LANG('买盘卖盘各自最多50条，后续版本全量数据可能会发多次，接收到全量数据后清空替换掉所有盘口。') %><br>
    <%= LANG('示例') %></p>

<h5 id="toc_9">request</h5>

<div><pre><code class="language-none">{&quot;dataType&quot;:&quot;90_ENTRUST_ADD_BTC_KRW&quot;,&quot;dataSize&quot;:50,&quot;action&quot;:&quot;ADD&quot;}</code></pre></div>

<h5 id="toc_10"><%= LANG('全量数据response') %></h5>

<div><pre><code class="language-none">[[&quot;AE&quot;,&quot;90&quot;,&quot;BTC_KRW&quot;,&quot;1530588744&quot;,
{&quot;asks&quot;:[[&quot;9.52474412&quot;,&quot;8.30549744&quot;],[&quot;9.52439338&quot;,&quot;1.27516183&quot;],[&quot;9.24510427&quot;,&quot;7.30032233&quot;]]},
{&quot;bids&quot;:[[&quot;9.22777334&quot;,&quot;0.7185328&quot;],[&quot;9.22746464&quot;,&quot;1.00998182&quot;],[&quot;9.22673134&quot;,&quot;10.67980016&quot;]]}]]  </code></pre></div>

<h5 id="toc_11"><%= LANG('增量数据response') %></h5>

<div><pre><code class="language-none">[&quot;E&quot;,&quot;90&quot;,&quot;1530596231&quot;,&quot;BTC_KRW&quot;,&quot;ASK&quot;,&quot;9.31466872&quot;,&quot;25.17915754&quot;]  </code></pre></div>

<p><%= LANG('request dataType格式为') %> <code><%= LANG('市场id_ENTRUST_ADD_市场卖方货币_市场卖方货币') %></code><br>
    <%= LANG('全量数据字段说明：[数据类型, 市场ID, 币种信息, 时间戳, asks:(卖盘)[[价格, 量]], bids(买盘)[[价格, 量]]]') %><br>
    <%= LANG('增量数据字段说明：[数据类型, 市场ID, 时间戳, 币种信息, 买卖类型(asks卖bids买), 价格, 量]') %><br>
    <%= LANG('每个增量数据表示的是单个档位要数据，当量为0时说明这个档位已经被全部交易完毕，需要移除。') %>  </p>

<h3 id="toc_12"><%= LANG('1.3交易记录') %></h3>

<p><%= LANG('全量数据买最多50条。') %><br>
    <%= LANG('示例') %></p>

<h5 id="toc_13">request</h5>

<div><pre><code class="language-none">{&quot;dataType&quot;:&quot;90_TRADE_BTC_KRW&quot;,&quot;dataSize&quot;:20,&quot;action&quot;:&quot;ADD&quot;}  </code></pre></div>

<h5 id="toc_14"><%= LANG('全量数据response') %></h5>

<div><pre><code class="language-none">[[&quot;T&quot;,&quot;90&quot;,&quot;1530588744&quot;,&quot;BTC_KRW&quot;,&quot;ask&quot;,&quot;9.21905755&quot;,&quot;9.51934036&quot;],
[&quot;T&quot;,&quot;90&quot;,&quot;1530588741&quot;,&quot;BTC_KRW&quot;,&quot;ask&quot;,&quot;9.1909928&quot;,&quot;7.82056220&quot;],
[&quot;T&quot;,&quot;90&quot;,&quot;1530588698&quot;,&quot;BTC_KRW&quot;,&quot;ask&quot;,&quot;9.26087653&quot;,&quot;3.05215100&quot;]] </code></pre></div>

<h5 id="toc_15"><%= LANG('后续增量数据response') %></h5>

<div><pre><code class="language-none">[&quot;T&quot;,&quot;90&quot;,&quot;1530596909&quot;,&quot;BTC_KRW&quot;,&quot;ask&quot;,&quot;9.22561602&quot;,&quot;15.26344425&quot;]  </code></pre></div>

<p><%= LANG('request dataType格式为') %> <code><%= LANG('市场id_TRADE_市场卖方货币_市场卖方货币') %></code><br>
    <%= LANG('全量数据是增量数据的列表形式，字段说明：[数据类型, 市场ID, 币种信息, 时间戳, 买卖类型(asks卖bids买), 价格, 量]') %></p>

<h3 id="toc_16"><%= LANG('市场行情包括6小时收盘价') %></h3>

<p><%= LANG('没有全量数据和增量数据的分别，只有一种格式。') %><br>
    <%= LANG('示例') %></p>

<h5 id="toc_17">request</h5>

<div><pre><code class="language-none">{&quot;dataType&quot;:&quot;ALL_TRADE_STATISTIC_24H&quot;,&quot;dataSize&quot;:1,&quot;action&quot;:&quot;ADD&quot;}  </code></pre></div>

<h5 id="toc_18">response</h5>

<div><pre><code class="language-none">{&quot;trade_statistic&quot;:
[[99,&quot;9.39&quot;,&quot;9.82&quot;,&quot;1&quot;,&quot;153734.8286&quot;,&quot;830.3&quot;,&quot;[[1, 9.39], [2, 9.37], [3, 9.24], [4, 9.39]]&quot;,&quot;9.27&quot;,&quot;9.39&quot;],
[90,&quot;9.5&quot;,&quot;6652698.301&quot;,&quot;1.02&quot;,&quot;169532.11&quot;,&quot;814.53&quot;,&quot;[[1, 9.486], [2, 9.658], [3, 9.212], [4, 9.25]]&quot;,&quot;9.4&quot;,&quot;9.227&quot;]]}</code></pre></div>

<p><%= LANG('request dataType固定为') %> <code>ALL_TRADE_STATISTIC_24H</code><br>
    <%= LANG('字段说明：') %><br>
    {&quot;trade_statistic&quot;<%= LANG(':[[ 市场ID, 最新成交价, 最高价，最低价, 24小时成交量，24小时涨跌幅, 最近6H收盘价列表,买一价，卖一价],....]}。') %><br>
    <%= LANG('最近6H收盘价列表数据说明：[[序号, 收盘价], [序号, 收盘价], [序号, 收盘价]]') %></p>


</div>
</div>
</body>

</html>
