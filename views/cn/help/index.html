<link rel="stylesheet" href="<%= STATIC %>/styles/help/index.css?<%= VERSION %>">

<div class="help" id="help-index">
    <div class="help-banner">
        <h2 class="banner-h2">EXX帮助中心</h2>
        <span class="banner-span">欢迎使用EXX帮助中心，我们对以往搜集到的问题进行汇总与解答，希望能够帮助到您。</span>
    </div>

    <%-include("help_search.html")%>

    <div class="help-content">
        <div class="help-container">
            <%-include("help_left.html")%>
            <div class="help_right" id="help_right">
                <div>
                    <h2>热门问题</h2>
                    <span>大家都在搜索的，或许是您所要了解的.</span>
                    <ul class="articles-ul">
                        <li class="articles-li" v-for="(item,key) in hotArticles">{{item.articleTitle}}</li>
                    </ul>
                </div>
                <div>
                    <h2>常见问题</h2>
                    <span>汇总了不同场景下常用操作指南教程，快速找到您的问题！</span>
                    <ul class="articles-ul">
                        <li class="articles-li articles-li-border" v-for="(item,key) in faqArticles">{{item.articleTitle}}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    require(['vue', 'common/methods'], function (Vue, Methods) {
        new Vue({
            el: '#help_right',
            mounted: function () {
                this.getHotArticles()
                this.getFaqArticles()
            },
            data: function () {
                return {
                    hotArticles:[],
                    faqArticles:[]
                }
            },
            methods:{
                getHotArticles: function () {
                    var lanNum = 1
                    switch (LAN) {
                        case "cn":
                            lanNum = 1
                            break;
                        case "en":
                            lanNum = 2
                            break;
                        case "kr":
                            lanNum = 3
                            break;
                        case "jp":
                            lanNum = 4
                            break;
                    }
                    var data = {
                        lanType: lanNum
                    };
                    Methods.ajax({
                        type: 'GET',
                        url: DOMAIN_DEV + "/exchange/support/controller/website/articlecontroller/" + 'gethotarticles',
                        data: data,
                        success: function (res) {
                            this.hotArticles = res.datas
                        }.bind(this)
                    });
                },
                getFaqArticles: function () {
                    var that = this
                    var lanNum = 1
                    switch (LAN) {
                        case "cn":
                            lanNum = 1
                            break;
                        case "en":
                            lanNum = 2
                            break;
                        case "kr":
                            lanNum = 3
                            break;
                        case "jp":
                            lanNum = 4
                            break;
                    }
                    var data = {
                        lanType: lanNum
                    };

                    Methods.ajax({
                        type: 'GET',
                        url: DOMAIN_DEV + "/exchange/support/controller/website/articlecontroller/" + 'getfaqarticles',
                        data: data,
                        success: function (res) {
                            if (res.datas.length > 0) {
                                that.faqArticles = res.datas
                            }
                        }
                    });
                }
            }
        })
    })
</script>
