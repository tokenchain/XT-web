<!doctype html>
<html>
<script type="text/javascript">
    var GLOBAL             = {},
        EXX = {},
        ENV               = GLOBAL['ENV']       = '<%= ENV %>',
        LAN               = GLOBAL['LAN']       = '<%= LAN %>',
        MONEY               = GLOBAL['MONEY']       = '<%= MONEY || "usd" %>',
        ISLOGIN               = GLOBAL['ISLOGIN']       = <%= Boolean(isLogin) %>,
        VERSION            = GLOBAL['VERSION']           = '<%= VERSION %>',
        DOMAIN_BASE        = GLOBAL['DOMAIN_BASE']       = '<%= DOMAIN_BASE %>',
        DOMAIN_DEV        = GLOBAL['DOMAIN_DEV']       = '<%= DOMAIN_DEV %>',
        WEBSOCKET        = GLOBAL['WEBSOCKET']       = '<%= WEBSOCKET %>';

    document.domain = DOMAIN_BASE;
</script>
<head>
	<meta charset="UTF-8">
	<title> <%= LANG('交易挖矿、收益多多') %>  </title>
	<script src="/src/js/TweenMax.min.js"></script>
	<script src="/src/js/noframework.waypoints.min.js"></script>
	<script src="/src/js/dxcicons.js" type="text/javascript"></script>
	<script src="/src/js/dxcseoicons.js" type="text/javascript"></script>
	<script src="/src/js/snap.svg.js" type="text/javascript"></script>
	<script src="/src/js/jquery-latest.min.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="/src/styles/xuleipro.css">
	<link rel="stylesheet" type="text/css" href="/src/js/zt_old.css">
	<link rel="shortcut icon" href="<%= STATIC %>/images/favicon/favicon.ico" type="image/x-icon">

</head>

<body>
<%-include("../include/head.html")%>

<div class="radial-bg"></div>

<section class="banner">
	<div class="container">
		<div class="banner-wrapper">
			<div class="banner-txt">
				<h1> <%= LANG('交易即挖矿，奖励比例最高至1000%') %></h1>
				<p class="slogan"> <%= LANG('网站收益的100%均用于交易Z') %> </a></p>
			</div>
			<div class="img-container" onclick="restartIcons([0])">
				<div  id="affiliateIcon" class="seoicon codeOptimizationIcon"></div>
			</div>
		</div>
	</div>
</section>
<section class="section">
	<div class="container">
		<div class="tab">
			<ul>
				<li><a href="/zt"> <%= LANG('概述') %> </a></li>
				<!--<li ><a href="/zb_zt"><%= LANG('ZB换码ZT') %></a></li>-->
				<li><a href="/ztfee"> <%= LANG('网站收益') %> </a></li>
                <li class="active"><a href="/ztminer"> <%= LANG('交易挖矿') %></a></li>
				<li><a href="/king"><%= LANG('富豪&逆袭') %></a></li>
			</ul>
		</div>




		<!--  object Method -->


		<div class="zt-miner" id="ztminerContent" v-cloak="">
			<div class="head">
				<%= LANG('待分配收益（扣除推荐人奖励之外的100%，所有ZT来源于用户交易手续费从二级市场兑换）') %>
				<p v-cloak="">{{todayminerstatDta.distributeAmount | capitalize}} ZT</p>
			</div>
			<ul class="miner-item">



				<li>
					<div class="text">
						<%= LANG('交易挖矿') %> <span style="color: #262542">  <%= LANG('加速池') %></span>
						<p>{{todayminerstatDta.posAmount |capitalize}} ZT</p>
					</div>
					<div class="icon"><object type="image/svg+xml" data="/src/js/rocket.svg" width="100px"></object></div>
					<!--<a href="javascript:detials()"> <%= LANG('查看详情') %></a>-->
					<p class="tips">
						<%= LANG('XT采用POW+POS的交易挖矿Z') %>
					</p>

				</li>
				<!--<li style="background: #4039D4;">-->
				<!--<div class="text" style="color: rgba(255,255,255,.8)">-->
				<!--<%= LANG('手续费贡献') %> <span style="color: #fff"><%= LANG('富豪池') %> </span>-->
				<!--<p style="color: #fff">{{statisticData.powFeeDayTotal}} ZT</p>-->
				<!--</div>-->
				<!--<div class="icon" onclick="restartIcons([1])"><div style="width: 135px" class="seoicon awardsIcon"></div></div>-->
				<!--<a href="javascript:detials()" style="background: #fff; color: #4039D4"><%= LANG('查看详情') %></a>-->
				<!--<p class="tips tips2">-->
				<!--<%= LANG('每日手续费的前10名Z') %>-->
				<!--</p>-->

				<!--</li>-->




				<!--<li>-->

				<!--<div class="text">-->
				<!--<%= LANG('1小时K线越顶') %> <span style="color: #262542"><%= LANG('逆袭池') %> </span>-->
				<!--<p>{{statisticData.powFeeDayTotal}} ZT</p>-->
				<!--</div>-->
				<!--<div class="icon" onclick="restartIcons([2])"><div style="width: 140px" class="seoicon monitoringIcon"></div></div>-->
				<!--<a href="javascript:detials()"><%= LANG('查看详情') %></a>-->
				<!--<p class="tips">-->
				<!--<%= LANG('在USDT对ZT交易市场开启后Z') %>-->
				<!--</p>-->
				<!--</li>-->
				<li style="background: #4039D4;">

					<div class="text" style="color: rgba(255,255,255,.8)">
						<%= LANG('通缩减码') %> <span style="color: #fff"><%= LANG('销毁池') %> </span>
						<p style="color: #fff">{{todayminerstatDta.destroyAmount | capitalize}} ZT</p>
					</div>
					<div class="icon" onclick="restartIcons([3])"><div style="width: 140px" class="seoicon targetingIcon"></div></div>
					<!--<a href="javascript:detials()" style="background: #fff; color: #4039D4"><%= LANG('查看详情') %></a>-->
					<p class="tips tips2">
						<%= LANG('总收入的10%用于每日销毁Z') %>
					</p>
				</li>
			</ul>


			<div class="miner-info">
				<div class="total">
					<%= LANG('当前可投入加速池中的ZT量') %>/ <%= LANG('我当前投入ZT总量') %>
					<div class="expedite">
						<span>{{getuserfeetotalData.availableAmount | capitalize }} /{{getuserfeetotalData.totalLockAmount | capitalize}}   ZT</span>
						<p class="right">
							<span @click="showmodel"><%= LANG('加速挖矿') %></span>
							<span @click="showshutmodel"><%= LANG('关闭加速') %></span>
						</p>
						<!--<a href="javascript:detials()" style="color:#4039d4;"></a> <a href="javascript:detials()"  style="color:#4039d4;"><%= LANG('关闭加速') %></a>-->
					</div>
				</div>
				<ul>
					<li>

						<div class="input"><span>{{getuserfeetotalData.tradeFeeZtAmount | capitalize}}</span></div>
						<%= LANG('当日贡献手续费(ZT)') %>
					</li>

					<li>

						<div class="input"> <span>{{getuserfeetotalData.freezeAmount | capitalize}}</span></div>
						<%= LANG('加速池有效数量(ZT)') %>
					</li>

					<li>

						<div class="input">  <span>{{getuserfeetotalData.distributeAmount | capitalize}}</span></div>
						<%= LANG('动态计算明日可得(ZT)') %>
					</li>

					<!--<li>-->
						<!--<div class="input">-->
							<!--<span v-if="getuserfeetotalData.predictSpeed">{{Math.floor((getuserfeetotalData.predictSpeed)*10000)/100}}%</span>-->
							<!--<span v-else>&#45;&#45;%</span>-->
						<!--</div>-->
						<!--<%= LANG('预计加速度') %>-->
					<!--</li>-->
				</ul>
				<p class="explain"><%= LANG('说明：开启加速状态下，您放入加速池中的ZT将处于锁仓状态，不可进行委托交易和提现操作；关闭加速后被锁仓的ZT将会被释放为可流通状态') %></p>
			</div>
			<!--加速模态框-->
			<div class="model" v-if="isshowmodel">
				<div class="model_con">
					<h4><%= LANG('您正在向加速池中投入ZT') %> </h4>
					<div class="input_num">
						<input type="number" v-model="amount" placeholder=" <%= LANG('请输入您要投入的数量') %> ">
						<!--<span @click="allnum">全部</span>-->
					</div>
					<p><%= LANG('您投入到加速池的ZT量须大于您当前可用总量的50%') %>  </p>
					<p>  <%= LANG('投入的ZT将在次日0：00开始计算分成') %>  </p>
					<div class="btn">
						<button @click="hodemodel"><%= LANG('取消') %></button>
						<button @click="open"><%= LANG('确认') %></button>
					</div>
				</div>
			</div>
			<div class="model" v-if="isshutmodel">
				<div class="model_con">
					<div class="icon">

					</div>
					<h4> <%= LANG('您正在关闭加速挖矿') %> </h4>
					<p> <%= LANG('如果关闭，您将放弃今日收益成分，是否确认关闭！') %> </p>
					<div class="btn">
						<button @click="hideshutmodel"><%= LANG('取消') %> </button>
						<button @click="close"><%= LANG('确认') %></button>
					</div>
				</div>
			</div>
		</div>

	</div>
</section>
</body>

<link rel="shortcut icon" href="<%= STATIC %>/images/favicon/favicon.ico?<%= VERSION %>">
<script type="text/javascript" src="<%= STATIC %>/scripts/common/web.lang.js?<%= VERSION %>"></script>
<script type="text/javascript" src="/lib/jqueryToast/jquery.toast.min.js?<%= VERSION %>"></script>
<script type="text/javascript" src="/lib/others/sweetalert.min.js?<%= VERSION %>"></script>
<script src="/lib/others/jquery.nicescroll.min.js" type="text/javascript"></script>
<script src="/lib/iscroll/iscroll.min.js" type="text/javascript"></script>
<link href="/lib/jqueryToast/jquery.toast.min.css?<%= VERSION %>" rel="stylesheet" type="text/css">
<script src="/lib/bootstrap/dist/js/bootstrap.min.js?<%= VERSION %>" charset="utf-8"></script>
<!--<script src="/src/scripts/jquery-ui.min.js"></script>-->
<script src="/src/scripts/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="/src/scripts/login/jquery.drawsvg.min.js"></script>

<!-- jQuery -->
<script src="<%= STATIC %>/scripts/zbg/js/vendor/jquery-3.2.1.min.js"></script>
<script src="<%= STATIC %>/scripts/zbg/js/vendor/jquery-migrate.min.js"></script>
<!-- Bootstrap js -->
<script src="<%= STATIC %>/scripts/zbg/js/vendor/bootstrap.bundle.min.js"></script>
<!-- font awesome -->
<script src="<%= STATIC %>/scripts/zbg/js/vendor/fontawesome-all.min.js"></script>
<!-- jQuery Countdown plugin -->
<script src="<%= STATIC %>/scripts/zbg/js/vendor/jquery.countdown.min.js"></script>
<!-- jQuery Easing Plugin -->
<script src="<%= STATIC %>/scripts/zbg/js/vendor/easing-1.3.js"></script>
<!-- jQuery progressbar plugin -->
<script src="<%= STATIC %>/scripts/zbg/js/vendor/jquery.waypoints.min.js"></script>
<!-- Bootstrap Progressbar -->
<script src="<%= STATIC %>/scripts/zbg/js/vendor/bootstrap-progressbar.min.js"></script>
<!-- ImagesLoaded js -->
<script src="<%= STATIC %>/scripts/zbg/js/vendor/imagesloaded.pkgd.min.js"></script>
<!-- Slick carousel js -->
<script src="<%= STATIC %>/scripts/zbg/js/vendor/slick.min.js"></script>
<!-- Magnific popup -->
<script src="<%= STATIC %>/scripts/zbg/js/vendor/jquery.magnific-popup.min.js"></script>
<!--<script src="<%= STATIC %>/scripts/zbg/js/main.js"></script>-->
<!--2018年06月26日16:18:09-->
<script type="text/javascript" src="<%= STATIC %>/scripts/common/web.lang.js?<%= VERSION %>"></script>
<script src="/lib/requirejs/require.js"></script>
<script type="text/javascript" src="<%= STATIC %>/scripts/main.js?<%= VERSION %>"></script>
<script>
    function loginErrorUi(message) {
        //$("#logBox").fadeOut();
        swal({
            title: "<%= LANG('提示') %>",
            text: message,
            icon: "warning",
            buttons: ["<%= LANG('确定') %>", false],
            dangerMode: false,
        }).then(function (willDelete) {
            //$("#logBox").fadeIn();
        });
        window.setTimeout(function () {
            $(".swal-overlay").trigger('click');
            //$("#logBox").fadeIn();
        }, 4000);
    }

</script>
<script>
    require(['vue', 'common/methods', 'common/juabox'], function (Vue, Methods, JuaBox) {
        var ztminerContent = new Vue({
            el: '#ztminerContent',
            data: function () {
                return {
                    statisticData:'',
                    getuserfeetotalData:'',
                    isshowmodel:false,//开启加速弹框
                    isshutmodel:false,//关闭加速弹框
                    todayminerstatDta:'',//
                    amount:'',//投入ZT
                }
            },
            methods: {
                statistic:function() {
                    var that=this;
                    Methods.ajax({
                        url: DOMAIN_DEV + "/exchange/fund/controller/website/FundMinerStatController/statistic",
                        success: function (res) {
                            that.statisticData=res.datas
                        },
                        error: function (res) {
                            var resMsg = res.resMsg;
                            // authErrorUi(EXX.L(resMsg.message));
                        }
                    })
                },
                //个人加速池接口
                getuserfeetotal:function(){
                    if (!ISLOGIN) {
                        return
                    }
                    var that=this;
                    Methods.ajax({
                        type: 'GET',
                        url: DOMAIN_DEV + "/exchange/fund/controller/website/FundMinerStatController/getUserFeeTotal",
                        success: function (res) {
                            that.getuserfeetotalData=res.datas
                        },
                        error: function (res) {
                            var resMsg = res.resMsg;
                            authErrorUi(EXX.L(resMsg.message));

                        }
                    })
                },
                //公共加速池接口
                todayminerstat: function(){
                    var that=this;
                    Methods.ajax({
                        url: DOMAIN_DEV + "/exchange/fund/controller/website/FundMinerStatController/todayminerstat",
                        success: function (res) {
                            that.todayminerstatDta=res.datas
                        },
                        error: function (res) {
                            var resMsg = res.resMsg;
                            authErrorUi(EXX.L(resMsg.message));

                        }
                    })
                },
                //开启加速事件
                showmodel(){
                    if (!ISLOGIN){
                        loginErrorUi("<%= LANG('请先登录') %>");
                        return
                    }
                    if (this.getuserfeetotalData.availableAmount<=0){
                        loginErrorUi("<%= LANG('您当前无可用余额，请前往充值或购买') %>");
                        return
                    }
                    this.isshowmodel = true
                },
                //取消加速
                hodemodel(){

                    this.isshowmodel = false
                },
                //关闭加速事件
                hideshutmodel(){
                    this.isshutmodel = false
                },
                //取消加速事件
                showshutmodel(){
                    if (!ISLOGIN){
                        loginErrorUi("<%= LANG('请先登录') %>");
                        return
                    }
                    if (Number(this.getuserfeetotalData.totalLockAmount) <=0){
                        loginErrorUi("<%= LANG('您还未投入ZT到加速池中') %>");
                        return
                    }



                    this.isshutmodel = true
                },
                //开启加速接口
                open:function () {
                    var that=this;
                    if (Number(that.amount) >0){
                        if (Number(that.getuserfeetotalData.availableAmount) >= Number(that.amount)){
                            if (Number(that.amount) >= that.getuserfeetotalData.availableAmount *0.5){
                                Methods.ajax({
                                    type:'POST',
                                    url: DOMAIN_DEV + "/exchange/fund/controller/website/FundMinerStatController/openminer",
                                    data:{
                                        amount:that.amount
                                    },
                                    success: function (res) {
                                        that.getuserfeetotal()
                                        that.todayminerstat()
                                        that.isshowmodel = false
                                        swal({
                                            title: "<%= LANG('提示') %>",
                                            text: "<%= LANG('1分钟内可同步完成，刷新页面可见。') %>",
                                            icon: "success",
                                            buttons: ["<%= LANG('确定') %>", false],
                                            dangerMode: false,
                                        })
                                    },
                                    error: function (res) {
                                        var resMsg = res.resMsg;
                                        swal({
                                            title: "<%= LANG('提示') %>",
                                            text: "<%= LANG('开启加速挖矿失败') %>",
                                            icon: "error",
                                            buttons: ["<%= LANG('确定') %>", false],
                                            dangerMode: false,
                                        })

                                    }
                                })
                            } else{
                                loginErrorUi("<%= LANG('投入ZT量需大于您可用ZT的50%') %>");
                            }

                        } else{
                            loginErrorUi("<%= LANG('您可用ZT余额不足，请前往充值或购买') %>");
                        }
                    }else{
                        loginErrorUi("<%= LANG('请输入正确的数量') %>");
                        return
                    }

                },
                //关闭加速
                close:function () {
                    var that=this;
                    Methods.ajax({
                        url: DOMAIN_DEV + "/exchange/fund/controller/website/FundMinerStatController/closeminer",
                        success: function (res) {
                            that.getuserfeetotal()
                            that.todayminerstat()
                            that.isshutmodel = false
                            swal({
                                title: "<%= LANG('提示') %>",
                                text: "<%= LANG('1分钟内可同步完成，刷新页面可见。') %>",
                                icon: "success",
                                buttons: ["<%= LANG('确定') %>", false],
                                dangerMode: false,
                            })
                        },
                        error: function (res) {
                            var resMsg = res.resMsg;
                            // authErrorUi(EXX.L(resMsg.message));
                            swal({
                                title: "<%= LANG('提示') %>",
                                text: "<%= LANG('关闭加速错误，请重新尝试') %>" ,
                                icon: "error",
                                buttons: ["<%= LANG('确定') %>", false],
                                dangerMode: false,
                            })
                        }
                    })
                },
                allnum(){
                    this.amount =this.getuserfeetotalData.availableAmount
                }
            },
            mounted: function () {
                // this.statistic()
                this.getuserfeetotal()
                this.todayminerstat()
            },
            filters: {
                capitalize: function (value) {
                    if (!value || value == null || value == 0 ) return '--'
                    return (Math.ceil(value*1000000))/1000000
                },
            }
        })
    });

    function detials() {
        JuaBox.info("尚未开始，挖矿活动正式开始于2018年7月24日 15:00！");
    }
</script>
